평면의 방정식은 아래처럼 기술할 수 있으며, (A, B, C)는 평면에 대한 법선(수직) 백터이고.. D는 이 법선 백터의 길이(크기)입니다. (x,y,z)는 평면상의 임이의 점입니다.

![사용자 삽입 이미지](http://www.gisdeveloper.co.kr/wp-content/uploads/1/1396906783.gif)
평면은 최소한 점 3개가 정해지면 평면의 방정식이 명확히 정의됩니다. 즉, 평면 상의 (x1,y1,z1)과 (x2, y2, z2) 그리고 (x3, y3, z3)가 정해지면 위의 공식에서 A, B, C, D의 값이 정해진다는 의미입니다. 각 A,B,C,D는 정해진 점들에 대해서 다음과 같은 행렬식으로 정의되며…

![사용자 삽입 이미지](http://www.gisdeveloper.co.kr/wp-content/uploads/1/1282846303.jpg)
위의 행렬식은 다음과 같이 다시 한번 전개가 됩니다.

![사용자 삽입 이미지](http://www.gisdeveloper.co.kr/wp-content/uploads/1/1246041557.jpg)
결국 이렇게 구한 A,B,C,D로부터 평면의 방정식이 결정되게 됩니다.



```python
def v(x1, y1, z1, x2, y2, z2, x3, y3, z3):
    A = y1 * (z2 - z3) + y2 * (z3 - z1) + y3 * (z1 - z2)
    B = z1 * (x2 - x3) + z2 * (x3 - x1) + z3 * (x1 - x2)
    C = x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)
    D = x1 * (y2 * z3 - y3 * z2) + x2 * (y3 * z1 - y1 * z3) + x3 * (y1 * z2 - y2 * z1)
    return A, B, C, D


T = int(input())
for test_case in range(T):
    N = int(input())
    fly = [list(map(int, input().split())) for _ in range(N)]
    if N < 4:
        ans = "TAK"
    else:
        a, b, c, d = v(*arr[0], *arr[1], *arr[2])
        # a, b, c, d = v(fly[0][0], fly[0][1], fly[0][2], fly[1][0], fly[1][1], fly[1][2], fly[2][0], fly[2][1], fly[2][2])
        for x, y, z in fly[3:]:
            if a * x + b * y * c * z + d:
                ans = "NIE"
                break
        else:
            ans = "TAK"
    print("#{} {}".format(test_case + 1, ans))
```



```python
def v(x1, y1, z1, x2, y2, z2, x3, y3, z3):
    A = y1 * (z2 - z3) + y2 * (z3 - z1) + y3 * (z1 - z2)
    B = z1 * (x2 - x3) + z2 * (x3 - x1) + z3 * (x1 - x2)
    C = x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)
    D = - (x1 * (y2 * z3 - y3 * z2) + x2 * (y3 * z1 - y1 * z3) + x3 * (y1 * z2 - y2 * z1))
    return A, B, C, D


T = int(input())
for test_case in range(T):
    N = int(input())
    arr = [list(map(int, input().split())) for _ in range(N)]
    ans = "TAK"
    if N > 3:
        a, b, c, d = v(*arr[0], *arr[1], *arr[2])
        for x, y, z in arr:
            t = a * x + b * y + c * z + d
            if a * x + b * y + c * z + d:
                ans = "NIE"
                break
    print("#{} {}".format(test_case + 1, ans))
```



```python
def v(x1, y1, z1, x2, y2, z2, x3, y3, z3):
    A = y1 * (z2 - z3) + y2 * (z3 - z1) + y3 * (z1 - z2)
    B = z1 * (x2 - x3) + z2 * (x3 - x1) + z3 * (x1 - x2)
    C = x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)
    D = - (x1 * (y2 * z3 - y3 * z2) + x2 * (y3 * z1 - y1 * z3) + x3 * (y1 * z2 - y2 * z1))
    return A, B, C, D


T = int(input())
for test_case in range(T):
    N = int(input())
    arr = [list(map(int, input().split())) for _ in range(N)]
    ans = "TAK"
    if N > 3:
        a, b, c, d = v(*arr[0], *arr[1], *arr[2])
        # print(a, b, c, d)
        for x, y, z in arr:
            s = a * x + b * y + c * z
            t = a * x + b * y + c * z + d
            if not (s == t == 0):
                ans = "NIE"
                break
            # if a * x + b * y + c * z + d:
            #     ans = "NIE"
            #     break
            # dd = t / (a ** 2 + b ** 2 + c ** 2) ** 0.5
            # if dd != 0:
            #     chk = 0
    print("#{} {}".format(test_case + 1, ans))
```



```python
def v(x1, y1, z1, x2, y2, z2, x3, y3, z3):
    A = y1 * (z2 - z3) + y2 * (z3 - z1) + y3 * (z1 - z2)
    B = z1 * (x2 - x3) + z2 * (x3 - x1) + z3 * (x1 - x2)
    C = x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)
    D = - (x1 * (y2 * z3 - y3 * z2) + x2 * (y3 * z1 - y1 * z3) + x3 * (y1 * z2 - y2 * z1))
    return A, B, C, D


T = int(input())
for test_case in range(T):
    N = int(input())
    arr = [list(map(int, input().split())) for _ in range(N)]
    ans = "TAK"
    xp, yp, zp = [0] * N, [0] * N, [0] * N
    if N > 3:
        a, b, c, d = v(*arr[0], *arr[1], *arr[2])
        for x, y, z in arr:
            n = a * x + b * y + c * z + d
            if n:
                ans = "NIE"
                break
        for i in range(N - 1):
            x, y, z = arr[i]
            for j in range(i + 1, N):
                if x == arr[i][0]:
                    xp[i] += 1
                if y == arr[i][1]:
                    yp[i] += 1
                if z == arr[i][2]:
                    zp[i] += 1
    print(xp)
    print(yp)
    print(zp)
    # print("#{} {}".format(test_case + 1, ans))
```



```python
def v(x1, y1, z1, x2, y2, z2, x3, y3, z3):
    A = y1 * (z2 - z3) + y2 * (z3 - z1) + y3 * (z1 - z2)
    B = z1 * (x2 - x3) + z2 * (x3 - x1) + z3 * (x1 - x2)
    C = x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)
    D = - (x1 * (y2 * z3 - y3 * z2) + x2 * (y3 * z1 - y1 * z3) + x3 * (y1 * z2 - y2 * z1))
    return A, B, C, D

T = int(input())
for test_case in range(T):
    N = int(input())
    arr = [list(map(int, input().split())) for _ in range(N)]
    ans = "TAK"

    if N > 3:
        chk1 = 1
        a, b, c, d = v(*arr[0], *arr[1], *arr[2])
        for x, y, z in arr:
            n = a * x + b * y + c * z + d
            if n:
                ans = "NIE"
                chk1 = 0
                break

        if chk1:
            chk2, idx = 0, 0
            for i in range(N - 1):
                if chk2:
                    break
                xchk, ychk, zchk = 0, 0, 0
                x1, y1, z1 = arr[i]
                xp, yp, zp = 0, 0, 0
                for j in range(i + 1, N):
                    x2, y2, z2 = arr[j]
                    if x1 == x2:
                        xp += 1
                        if xp == 2:
                            xchk, chk2, idx = 1, 1, i
                            break
                    if y1 == y2:
                        yp += 1
                        if yp == 2:
                            ychk, chk2, idx = 1, 1, i
                            break
                    if z1 == z2:
                        zp += 1
                        if zp == 2:
                            zchk, chk2, idx = 1, 1, i
                            break

            if chk2:
                if xchk:
                    for i in arr:
                        if i[0] != x1:
                            ans = "NIE"
                            break
                elif ychk:
                    for i in arr:
                        if i[1] != y1:
                            ans = "NIE"
                            break
                elif zchk:
                    for i in arr:
                        if i[2] != z1:
                            ans = "NIE"
                            break
    print("#{} {}".format(test_case + 1, ans))
```

