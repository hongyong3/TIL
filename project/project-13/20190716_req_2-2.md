# 20190716_req_2-2

## Project



##### GitlabGraph.vue

```vue
<template>
    <div>
        <div id="chart" class="hide_xs"></div>
    </div>
</template>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src = "https://unpkg.com/axios/dist/axios.min.js"></script>
<script src = "https://unpkg.com/frappe-charts@1.1.0/dist/frappe-charts.min.iife.js"></script>

<script >
export default {
    name: 'GitlabGraph',

    data() {
        return {
            gitCommits: [],
            gitCommitDates: [],
            commits: [],
        }
    },

    components: {

    },

    mounted() {
        this.getgitCommits()
        const data = {
            labels: this.gitCommitDates,
            datasets: [{
                name: "Commit count",
                type: "bar",
                values: this.commits
            }, ]
        }

        const chart = new frappe.Chart("#chart", {
            title: "My Awesome Chart",
            data: data,
            type: 'axis-mixed', // or 'bar', 'line', 'scatter', 'pie', 'percentage'
            height: 250,
            colors: ['#7cd6fd', '#743ee2']
        })
    },

    methods: {
        getgitCommits: function() {
            axios.get('https://lab.ssafy.com/api/v4/projects/6075/events?per_page=100&private_token=<Token_Key>')
                .then(response => {
                    this.gitCommits = response.data.reverse()
                })
                .then(() => {
                   this.getDate()
                })
        },
        getDate: function() {
            for (var i = 0; i < this.gitCommits.length; i++) {
                if (this.gitCommits[i]["action_name"] === "pushed to") {
                    var flag = 0;
                    var tempdate = this.gitCommits[i]["created_at"].slice(0, 10)
                    for (var j = 0; j < this.gitCommitDates.length; j++) {
                        if (tempdate === this.gitCommitDates[j]) {
                            flag = 1;
                            this.commits[j] += 1
                            // this.commits[j] += this.gitCommits[i]["push_data"]["commit_count"];
                        }
                    }
                    if (flag === 0) {
                        this.gitCommitDates.push(tempdate);
                        this.commits.push(this.gitCommits[i]["push_data"]["commit_count"]);
                    }
                }
            }
        }
    },
}
</script>

<style>
@media only screen and (max-width : 450px) {
    .hide_xs {
        display: none;
    }
}
</style>

```



##### GitlabLinkBox.vue

```vue
<template>
    <div class="card-wrapper">
        <div class="card-title">
            Gitlab 그래프 확인하기
        </div>
        <div class="card-bar" />
        <div class="card-content-wrapper">
            <router-link to="/GitlabGraph2" class="button" style="color:black !important">
                <img src="https://about.gitlab.com/images/press/logo/png/gitlab-logo-gray-rgb.png" style="width: 100%;">
            </router-link>
        </div>
    </div>
</template>

<script>
export default {
    name: 'GitlabLinkBox',
}
</script>
```



##### GitlabGraph2.vue

```vue
<template>
  <div>
    <Navbar />
    <br />
    <GitlabGraph></GitlabGraph>
  </div>
</template>

<script >
import GitlabGraph from "@/components/gitlab/GitlabGraph";
import Navbar from "@/components/mainview/Navbar";

export default {
  name: "GitlabGraph2",
  components: {
    GitlabGraph,
    Navbar
  }
};
</script>

```

